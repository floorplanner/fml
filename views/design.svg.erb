<% if envelope %><?xml version="1.0" standalone="no"?>
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="100%"
   height="100%"
   version="1.1"
   id="svg2"
   sodipodi:version="0.32"
   inkscape:version="0.46"
   sodipodi:docname="fofo.svg"
   inkscape:output_extension="org.inkscape.output.svg.inkscape">
  <metadata
     id="metadata39">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <defs
     id="defs37">
    <inkscape:perspective
       sodipodi:type="inkscape:persp3d"
       inkscape:vp_x="0 : 0.5 : 1"
       inkscape:vp_y="0 : 1000 : 0"
       inkscape:vp_z="1 : 0.5 : 1"
       inkscape:persp3d-origin="0.5 : 0.33333333 : 1"
       id="perspective41" />
  </defs>
  <sodipodi:namedview
     inkscape:window-height="758"
     inkscape:window-width="1280"
     inkscape:pageshadow="2"
     inkscape:pageopacity="0.0"
     guidetolerance="10.0"
     gridtolerance="10.0"
     objecttolerance="10.0"
     borderopacity="1.0"
     bordercolor="#666666"
     pagecolor="#ffffff"
     id="base"
     showgrid="false"
     showborder="false"
     inkscape:zoom="0.04"
     inkscape:cx="10.0"
     inkscape:cy="1049.4872"
     inkscape:window-x="0"
     inkscape:window-y="20"
     inkscape:document-units="mm" />
     inkscape:current-layer="svg2" />

<% end %>

<% @walls.vertices.each do |v| %>

  <path
     sodipodi:type="arc"
     style="opacity:1;fill:#0c5c09;fill-opacity:1;stroke:#0000ff;stroke-width:12.0;stroke-miterlimit:4;stroke-dasharray:none"
     id="path4931"
     sodipodi:cx="<%= v.x*1000 %>"
     sodipodi:cy="<%= v.y*1000 %>"
     sodipodi:rx="16.0"
     sodipodi:ry="16.0"
     d="M 6.1816599,6.5319185 A 0.019334951,0.019334951 0 1 1 6.14299,6.5319185 A 0.019334951,0.019334951 0 1 1 6.1816599,6.5319185 z" />

<% end %>

<% @walls.polys.each do |poly| %>
  
  <% poly.faces.each do |face| %>

    <polygon points="<%= face.vertices.collect{|v| [v.x*1000,v.y*1000].join(',')}.join(' ') %>" style="stroke:rgb(0,0,0);stroke-width:8.0;fill:<%= poly.color %>;opacity:0.3" />

  <% end %>

<% end %>

<% if envelope %> </svg> <% end %>
